define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(e,t,n,i){function m(n){return function(i,r){"string"!=typeof i&&(r=i,i="*");var o,a=0,s=i.toLowerCase().match(t)||[];if(e.isFunction(r))for(;o=s[a++];)"+"===o[0]?(o=o.slice(1)||"*",(n[o]=n[o]||[]).unshift(r)):(n[o]=n[o]||[]).push(r)}}function g(t,n,i,r){function s(l){var u;return o[l]=!0,e.each(t[l]||[],function(e,t){var l=t(n,i,r);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(n.dataTypes.unshift(l),s(l),!1)}),u}var o={},a=t===d;return s(n.dataTypes[0])||!o["*"]&&s("*")}function y(t,n){var i,r,o=e.ajaxSettings.flatOptions||{};for(i in n)void 0!==n[i]&&((o[i]?t:r||(r={}))[i]=n[i]);return r&&e.extend(!0,t,r),t}function b(e,t,n){for(var i,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function w(e,t,n,i){var r,o,a,s,l,u={},f=e.dataTypes.slice();if(f[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=f.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=f.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(r in u)if(s=r.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[r]:u[r]!==!0&&(o=s[0],f.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(c){return{state:"parsererror",error:a?c:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}var r=/#.*$/,o=/([?&])_=[^&]*/,a=/^(.*?):[ \t]*([^\r\n]*)$/gm,s=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,l=/^(?:GET|HEAD)$/,u=/^\/\//,f=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,c={},d={},p="*/".concat("*"),h=window.location.href,v=f.exec(h.toLowerCase())||[];return e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:h,type:"GET",isLocal:s.test(v[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":p,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":e.parseJSON,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?y(y(t,e.ajaxSettings),n):y(e.ajaxSettings,t)},ajaxPrefilter:m(c),ajaxTransport:m(d),ajax:function(s,m){function B(t,n,i,r){var o,a,s,l,u,f=n;2!==R&&(R=2,C&&clearTimeout(C),y=void 0,S=r||"",H.readyState=t>0?4:0,o=t>=200&&300>t||304===t,i&&(l=b(_,H,i)),l=w(_,l,H,o),o?(_.ifModified&&(u=H.getResponseHeader("Last-Modified"),u&&(e.lastModified[x]=u),u=H.getResponseHeader("etag"),u&&(e.etag[x]=u)),204===t||"HEAD"===_.type?f="nocontent":304===t?f="notmodified":(f=l.state,a=l.data,s=l.error,o=!s)):(s=f,(t||!f)&&(f="error",0>t&&(t=0))),H.status=t,H.statusText=(n||f)+"",o?L.resolveWith(A,[a,f,H]):L.rejectWith(A,[H,f,s]),H.statusCode(O),O=void 0,E&&N.trigger(o?"ajaxSuccess":"ajaxError",[H,_,o?a:s]),D.fireWith(A,[H,f]),E&&(N.trigger("ajaxComplete",[H,_]),--e.active||e.event.trigger("ajaxStop")))}"object"==typeof s&&(m=s,s=void 0),m=m||{};var y,x,S,T,C,k,E,j,_=e.ajaxSetup({},m),A=_.context||_,N=_.context&&(A.nodeType||A.jquery)?e(A):e.event,L=e.Deferred(),D=e.Callbacks("once memory"),O=_.statusCode||{},P={},F={},R=0,M="canceled",H={readyState:0,getResponseHeader:function(e){var t;if(2===R){if(!T)for(T={};t=a.exec(S);)T[t[1].toLowerCase()]=t[2];t=T[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===R?S:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return R||(e=F[n]=F[n]||e,P[e]=t),this},overrideMimeType:function(e){return R||(_.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>R)for(t in e)O[t]=[O[t],e[t]];else H.always(e[H.status]);return this},abort:function(e){var t=e||M;return y&&y.abort(t),B(0,t),this}};if(L.promise(H).complete=D.add,H.success=H.done,H.error=H.fail,_.url=((s||_.url||h)+"").replace(r,"").replace(u,v[1]+"//"),_.type=m.method||m.type||_.method||_.type,_.dataTypes=e.trim(_.dataType||"*").toLowerCase().match(t)||[""],null==_.crossDomain&&(k=f.exec(_.url.toLowerCase()),_.crossDomain=!(!k||k[1]===v[1]&&k[2]===v[2]&&(k[3]||("http:"===k[1]?"80":"443"))===(v[3]||("http:"===v[1]?"80":"443")))),_.data&&_.processData&&"string"!=typeof _.data&&(_.data=e.param(_.data,_.traditional)),g(c,_,m,H),2===R)return H;E=e.event&&_.global,E&&0===e.active++&&e.event.trigger("ajaxStart"),_.type=_.type.toUpperCase(),_.hasContent=!l.test(_.type),x=_.url,_.hasContent||(_.data&&(x=_.url+=(i.test(x)?"&":"?")+_.data,delete _.data),_.cache===!1&&(_.url=o.test(x)?x.replace(o,"$1_="+n++):x+(i.test(x)?"&":"?")+"_="+n++)),_.ifModified&&(e.lastModified[x]&&H.setRequestHeader("If-Modified-Since",e.lastModified[x]),e.etag[x]&&H.setRequestHeader("If-None-Match",e.etag[x])),(_.data&&_.hasContent&&_.contentType!==!1||m.contentType)&&H.setRequestHeader("Content-Type",_.contentType),H.setRequestHeader("Accept",_.dataTypes[0]&&_.accepts[_.dataTypes[0]]?_.accepts[_.dataTypes[0]]+("*"!==_.dataTypes[0]?", "+p+"; q=0.01":""):_.accepts["*"]);for(j in _.headers)H.setRequestHeader(j,_.headers[j]);if(_.beforeSend&&(_.beforeSend.call(A,H,_)===!1||2===R))return H.abort();M="abort";for(j in{success:1,error:1,complete:1})H[j](_[j]);if(y=g(d,_,m,H)){H.readyState=1,E&&N.trigger("ajaxSend",[H,_]),_.async&&_.timeout>0&&(C=setTimeout(function(){H.abort("timeout")},_.timeout));try{R=1,y.send(P,B)}catch(q){if(!(2>R))throw q;B(-1,q)}}else B(-1,"No Transport");return H},getJSON:function(t,n,i){return e.get(t,n,i,"json")},getScript:function(t,n){return e.get(t,void 0,n,"script")}}),e.each(["get","post"],function(t,n){e[n]=function(t,i,r,o){return e.isFunction(i)&&(o=o||r,r=i,i=void 0),e.ajax({url:t,type:n,dataType:o,data:i,success:r})}}),e});