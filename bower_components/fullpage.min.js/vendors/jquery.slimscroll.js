!function(e){jQuery.fn.extend({slimScroll:function(n){var i={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},r=e.extend(i,n);return this.each(function(){function T(t){if(i){var t=t||window.event,n=0;t.wheelDelta&&(n=-t.wheelDelta/120),t.detail&&(n=t.detail/3);var o=t.target||t.srcTarget||t.srcElement;e(o).closest("."+r.wrapperClass).is(v.parent())&&S(n,!0),t.preventDefault&&!h&&t.preventDefault(),h||(t.returnValue=!1)}}function S(e,t,n){h=!1;var i=e,o=v.outerHeight()-w.outerHeight();if(t&&(i=parseInt(w.css("top"))+e*parseInt(r.wheelStep)/100*w.outerHeight(),i=Math.min(Math.max(i,0),o),i=e>0?Math.ceil(i):Math.floor(i),w.css({top:i+"px"})),f=parseInt(w.css("top"))/(v.outerHeight()-w.outerHeight()),i=f*(v[0].scrollHeight-v.outerHeight()),n){i=e;var a=i/v[0].scrollHeight*v.outerHeight();a=Math.min(Math.max(a,0),o),w.css({top:a+"px"})}v.scrollTop(i),v.trigger("slimscrolling",~~i),j(),_()}function C(){window.addEventListener?(this.addEventListener("DOMMouseScroll",T,!1),this.addEventListener("mousewheel",T,!1)):document.attachEvent("onmousewheel",T)}function k(){window.removeEventListener?(this.removeEventListener("DOMMouseScroll",T),this.removeEventListener("mousewheel",T)):document.detachEvent("onmousewheel",T)}function E(){u=Math.max(v.outerHeight()/v[0].scrollHeight*v.outerHeight(),p),w.css({height:u+"px"});var e=u==v.outerHeight()?"none":"block";w.css({display:e})}function j(){if(E(),clearTimeout(s),f==~~f){if(h=r.allowPageScroll,c!=f){var e=0==~~f?"top":"bottom";v.trigger("slimscroll",e)}}else h=!1;return c=f,u>=v.outerHeight()?void(h=!0):(w.stop(!0,!0).fadeIn("fast"),void(r.railVisible&&b.stop(!0,!0).fadeIn("fast")))}function _(){r.alwaysVisible||(s=setTimeout(function(){r.disableFadeOut&&i||o||a||(w.fadeOut("slow"),b.fadeOut("slow"))},1e3))}var i,o,a,s,l,u,f,c,d="<div></div>",p=30,h=!1,v=e(this);if(v.parent().hasClass(r.wrapperClass)){var m=v.scrollTop();if(w=v.parent().find("."+r.barClass),b=v.parent().find("."+r.railClass),E(),e.isPlainObject(n)){if("height"in n&&"auto"==n.height){v.parent().css("height","auto"),v.css("height","auto");var g=v.parent().parent().height();v.parent().css("height",g),v.css("height",g)}if("scrollTo"in n)m=parseInt(r.scrollTo);else if("scrollBy"in n)m+=parseInt(r.scrollBy);else if("destroy"in n)return k(),w.remove(),b.remove(),void v.unwrap();S(m,!1,!0)}}else{r.height="auto"==n.height?v.parent().height():n.height;var y=e(d).addClass(r.wrapperClass).css({position:"relative",overflow:"hidden",width:r.width,height:r.height});v.css({overflow:"hidden",width:r.width,height:r.height});var b=e(d).addClass(r.railClass).css({width:r.size,height:"100%",position:"absolute",top:0,display:r.alwaysVisible&&r.railVisible?"block":"none","border-radius":r.railBorderRadius,background:r.railColor,opacity:r.railOpacity,zIndex:90}),w=e(d).addClass(r.barClass).css({background:r.color,width:r.size,position:"absolute",top:0,opacity:r.opacity,display:r.alwaysVisible?"block":"none","border-radius":r.borderRadius,BorderRadius:r.borderRadius,MozBorderRadius:r.borderRadius,WebkitBorderRadius:r.borderRadius,zIndex:99}),x="right"==r.position?{right:r.distance}:{left:r.distance};b.css(x),w.css(x),v.wrap(y),v.parent().append(w),v.parent().append(b),r.railDraggable&&w.bind("mousedown",function(n){var i=e(document);return a=!0,t=parseFloat(w.css("top")),pageY=n.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,w.css("top",currTop),S(0,w.position().top,!1)}),i.bind("mouseup.slimscroll",function(e){a=!1,_(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),b.hover(function(){j()},function(){_()}),w.hover(function(){o=!0},function(){o=!1}),v.hover(function(){i=!0,j(),_()},function(){i=!1,_()}),v.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(l=e.originalEvent.touches[0].pageY)}),v.bind("touchmove",function(e){if(h||e.originalEvent.preventDefault(),e.originalEvent.touches.length){var t=(l-e.originalEvent.touches[0].pageY)/r.touchScrollStep;S(t,!0),l=e.originalEvent.touches[0].pageY}}),E(),"bottom"===r.start?(w.css({top:v.outerHeight()-w.outerHeight()}),S(0,!0)):"top"!==r.start&&(S(e(r.start).position().top,null,!0),r.alwaysVisible||w.hide()),C()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery);